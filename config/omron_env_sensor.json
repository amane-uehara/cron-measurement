{
  "constant": {
    "warning" : "This `constant` block will be over written. Do not edit this file.",

    "hostname"                     : "example_host",
    "omron_env_sensor_raw_path"    : "/path/to/raw/data/dir",
    "omron_env_sensor_hourly_path" : "/path/to/hourly/data/dir",
    "omron_env_sensor_daily_path"  : "/path/to/daily/data/dir",
    "omron_env_sensor_drop_files"  : "${inkbird_raw_path}/${yyyymmddhh-4}*.json",

    "omron_env_sensor_mac_addr"    : "11:22:33:44:55:FF",
    "omron_env_sensor_location"    : "somewhere"
  },

  "job_omron_env_sensor_raw_json": {
    "item"            : "omron_env_sensor",
    "sensor"          : "omron_env_sensor",
    "program"         : "fetch_raw_json",
    "output_file"     : "${omron_env_sensor_raw_path}/${yyyymmddhhmmss}.json",
    "sensor_mac_addr" : "${omron_env_sensor_mac_addr}",
    "sensor_location" : "${omron_env_sensor_location}",
    "extra"           : {
      "sensor_mac_addr" : "${omron_env_sensor_mac_addr}",
      "sensor_location" : "${omron_env_sensor_location}"
    },
    "bt_retry_count"  : 100,
    "bt_dev_id"       : 0
  },
  "job_omron_env_sensor_drop": {
    "item"            : "omron_env_sensor",
    "sensor"          : "shell",
    "program"         : "shell",
    "command_list"    : [
      "ls ${omron_env_sensor_drop_files} | wc -l",
      "rm -rf ${omron_env_sensor_drop_files}",
      "ls ${omron_env_sensor_drop_files} | wc -l"
    ]
  },

  "job_omron_env_sensor_hourly_cron": {
    "item"            : "omron_env_sensor",
    "sensor"          : "fork",
    "program"         : "fork",
    "fork_time"       : "${yyyymmddhhmmss}",
    "job_list"        : [
      "job_omron_env_sensor_hourly_json",
      "job_omron_env_sensor_hourly_csv"
    ]
  },
  "job_omron_env_sensor_hourly_json": {
    "item"            : "omron_env_sensor",
    "sensor"          : "omron_env_sensor",
    "program"         : "to_json_list",
    "input_file_list" : ["${omron_env_sensor_raw_path}/${yyyymmddhh}*.json"],
    "output_file"     : "${omron_env_sensor_hourly_path}/json/${yyyymmddhh}.json.gz"
  },
  "job_omron_env_sensor_hourly_csv": {
    "item"            : "omron_env_sensor",
    "sensor"          : "omron_env_sensor",
    "program"         : "to_csv",
    "run_key_list"    : ["dt", "yyyymmdd", "hostname", "mac_addr", "extra.sensor_mac_addr", "extra.sensor_location"],
    "input_file_list" : ["${omron_env_sensor_hourly_path}/json/${yyyymmddhh}.json.gz"],
    "output_file"     : "${omron_env_sensor_hourly_path}/csv/${yyyymmddhh}.csv.gz"
  },

  "job_omron_env_sensor_daily_cron": {
    "item"            : "omron_env_sensor",
    "sensor"          : "fork",
    "program"         : "fork",
    "fork_time"       : "${yyyymmddhhmmss}",
    "job_list"        : [
      "job_omron_env_sensor_daily_json",
      "job_omron_env_sensor_daily_calc"
    ]
  },
  "job_omron_env_sensor_daily_calc": {
    "item"            : "omron_env_sensor",
    "sensor"          : "fork",
    "program"         : "fork",
    "fork_time"       : "${yyyymmddhhmmss}",
    "job_list"        : [
      "job_omron_env_sensor_daily_csv",
      "job_omron_env_sensor_daily_percentile_json",
      "job_omron_env_sensor_daily_percentile_csv",
      "job_omron_env_sensor_daily_sample_csv_60",
      "job_omron_env_sensor_daily_sample_csv_600",
      "job_omron_env_sensor_daily_sample_csv_3600"
    ]
  },
  "job_omron_env_sensor_daily_json": {
    "item"            : "omron_env_sensor",
    "sensor"          : "omron_env_sensor",
    "program"         : "to_json_list",
    "input_file_list" : ["${omron_env_sensor_hourly_path}/json/${yyyymmdd}*.json.gz"],
    "output_file"     : "${omron_env_sensor_daily_path}/all_json/${yyyymmdd}.json.gz"
  },
  "job_omron_env_sensor_daily_csv": {
    "item"            : "omron_env_sensor",
    "sensor"          : "omron_env_sensor",
    "program"         : "to_csv",
    "run_key_list"    : ["dt", "yyyymmdd", "hostname", "mac_addr", "extra.sensor_mac_addr", "extra.sensor_location"],
    "input_file_list" : ["${omron_env_sensor_daily_path}/all_json/${yyyymmdd}.json.gz"],
    "output_file"     : "${omron_env_sensor_daily_path}/all_csv/${yyyymmdd}.csv.gz"
  },
  "job_omron_env_sensor_daily_percentile_json": {
    "item"            : "omron_env_sensor",
    "sensor"          : "omron_env_sensor",
    "program"         : "to_percentile_json_list",
    "division_number" : 100,
    "run_key_list"    : ["yyyymmdd", "hostname", "mac_addr", "extra.sensor_mac_addr", "extra.sensor_location"],
    "input_file_list" : ["${omron_env_sensor_daily_path}/all_json/${yyyymmdd}.json.gz"],
    "output_file"     : "${omron_env_sensor_daily_path}/percentile_json/${yyyymmdd}.json.gz"
  },
  "job_omron_env_sensor_daily_percentile_csv": {
    "item"            : "omron_env_sensor",
    "sensor"          : "omron_env_sensor",
    "program"         : "to_csv",
    "division_number" : 100,
    "run_key_list"    : ["percentile", "yyyymmdd", "hostname", "mac_addr", "extra.sensor_mac_addr", "extra.sensor_location"],
    "input_file_list" : ["${omron_env_sensor_daily_path}/percentile_json/${yyyymmdd}.json.gz"],
    "output_file"     : "${omron_env_sensor_daily_path}/percentile_csv/${yyyymmdd}.csv.gz"
  },
  "job_omron_env_sensor_daily_sample_csv_60": {
    "item"            : "omron_env_sensor",
    "sensor"          : "omron_env_sensor",
    "program"         : "to_sample_csv",
    "run_key_list"    : ["dt", "yyyymmdd", "hostname", "mac_addr", "extra.sensor_mac_addr", "extra.sensor_location"],
    "sample_time_key" : "dt",
    "sample_begin"    : "${yyyymmdd}000000",
    "sample_end"      : "${yyyymmdd+1}000000",
    "sample_interval" : 60,
    "input_file_list" : ["${omron_env_sensor_daily_path}/all_json/${yyyymmdd}.json.gz"],
    "output_file"     : "${omron_env_sensor_daily_path}/sample_csv_${sample_interval}/${yyyymmdd}.csv.gz"
  },
  "job_omron_env_sensor_daily_sample_csv_600": {
    "item"            : "omron_env_sensor",
    "sensor"          : "omron_env_sensor",
    "program"         : "to_sample_csv",
    "run_key_list"    : ["dt", "yyyymmdd", "hostname", "mac_addr", "extra.sensor_mac_addr", "extra.sensor_location"],
    "sample_time_key" : "dt",
    "sample_begin"    : "${yyyymmdd}000000",
    "sample_end"      : "${yyyymmdd+1}000000",
    "sample_interval" : 600,
    "input_file_list" : ["${omron_env_sensor_daily_path}/all_json/${yyyymmdd}.json.gz"],
    "output_file"     : "${omron_env_sensor_daily_path}/sample_csv_${sample_interval}/${yyyymmdd}.csv.gz"
  },
  "job_omron_env_sensor_daily_sample_csv_3600": {
    "item"            : "omron_env_sensor",
    "sensor"          : "omron_env_sensor",
    "program"         : "to_sample_csv",
    "run_key_list"    : ["dt", "yyyymmdd", "hostname", "mac_addr", "extra.sensor_mac_addr", "extra.sensor_location"],
    "sample_time_key" : "dt",
    "sample_begin"    : "${yyyymmdd}000000",
    "sample_end"      : "${yyyymmdd+1}000000",
    "sample_interval" : 3600,
    "input_file_list" : ["${omron_env_sensor_daily_path}/all_json/${yyyymmdd}.json.gz"],
    "output_file"     : "${omron_env_sensor_daily_path}/sample_csv_${sample_interval}/${yyyymmdd}.csv.gz"
  }
}
