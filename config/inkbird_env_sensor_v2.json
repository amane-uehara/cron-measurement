{
  "constant": {
    "warning" : "This `constant` block will be over written. Do not edit this file.",

    "hostname"                           : "example_host",
    "inkbird_env_sensor_v2_raw_path"    : "/path/to/raw/data/dir",
    "inkbird_env_sensor_v2_hourly_path" : "/path/to/hourly/data/dir",
    "inkbird_env_sensor_v2_daily_path"  : "/path/to/daily/data/dir",
    "inkbird_env_sensor_v2_drop_files"  : "${inkbird_env_sensor_v2_raw_path}/${yyyymmddhh-4}*_inkbird-ibs-th2.json"
  },

  "job_inkbird_env_sensor_v2_drop": {
    "item"            : "inkbird_env_sensor_v2",
    "sensor"          : "shell",
    "program"         : "shell",
    "command_list"    : [
      "ls ${inkbird_env_sensor_v2_drop_files} | wc -l",
      "rm -rf ${inkbird_env_sensor_v2_drop_files}",
      "ls ${inkbird_env_sensor_v2_drop_files} | wc -l"
    ]
  },

  "job_inkbird_env_sensor_v2_hourly_cron": {
    "item"            : "inkbird_env_sensor_v2",
    "sensor"          : "fork",
    "program"         : "fork",
    "fork_time"       : "${yyyymmddhhmmss}",
    "job_list"        : [
      "job_inkbird_env_sensor_v2_hourly_json",
      "job_inkbird_env_sensor_v2_hourly_csv"
    ]
  },
  "job_inkbird_env_sensor_v2_hourly_json": {
    "item"            : "inkbird_env_sensor_v2",
    "sensor"          : "inkbird_env_sensor_v2",
    "program"         : "to_json_list",
    "input_file_list" : ["${inkbird_env_sensor_v2_raw_path}/${yyyymmddhh}*_inkbird-ibs-th2.json"],
    "output_file"     : "${inkbird_env_sensor_v2_hourly_path}/json/${yyyymmddhh}.json.gz"
  },
  "job_inkbird_env_sensor_v2_hourly_csv": {
    "item"            : "inkbird_env_sensor_v2",
    "sensor"          : "inkbird_env_sensor_v2",
    "program"         : "to_csv",
    "run_key_list"    : ["dt_jst9", "http_dongle_mac_addr", "sensor_mac_addr"],
    "data_key_list"   : ["temperature", "relative_humidity", "absolute_humidity"],
    "input_file_list" : ["${inkbird_env_sensor_v2_hourly_path}/json/${yyyymmddhh}.json.gz"],
    "output_file"     : "${inkbird_env_sensor_v2_hourly_path}/csv/${yyyymmddhh}.csv.gz"
  },
  "job_inkbird_env_sensor_v2_daily_cron": {
    "item"            : "inkbird_env_sensor_v2",
    "sensor"          : "fork",
    "program"         : "fork",
    "fork_time"       : "${yyyymmddhhmmss}",
    "job_list"        : [
      "job_inkbird_env_sensor_v2_daily_json",
      "job_inkbird_env_sensor_v2_daily_calc"
    ]
  },
  "job_inkbird_env_sensor_v2_daily_calc": {
    "item"            : "inkbird_env_sensor_v2",
    "sensor"          : "fork",
    "program"         : "fork",
    "fork_time"       : "${yyyymmddhhmmss}",
    "job_list"        : [
      "job_inkbird_env_sensor_v2_daily_csv",
      "job_inkbird_env_sensor_v2_daily_percentile_json",
      "job_inkbird_env_sensor_v2_daily_percentile_csv",
      "job_inkbird_env_sensor_v2_daily_sample_csv_60",
      "job_inkbird_env_sensor_v2_daily_sample_csv_600",
      "job_inkbird_env_sensor_v2_daily_sample_csv_3600"
    ]
  },
  "job_inkbird_env_sensor_v2_daily_json": {
    "item"            : "inkbird_env_sensor_v2",
    "sensor"          : "inkbird_env_sensor_v2",
    "program"         : "to_json_list",
    "input_file_list" : ["${inkbird_env_sensor_v2_hourly_path}/json/${yyyymmdd}*.json.gz"],
    "output_file"     : "${inkbird_env_sensor_v2_daily_path}/all_json/${yyyymmdd}.json.gz"
  },
  "job_inkbird_env_sensor_v2_daily_csv": {
    "item"            : "inkbird_env_sensor_v2",
    "sensor"          : "inkbird_env_sensor_v2",
    "program"         : "to_csv",
    "run_key_list"    : ["dt_jst9", "http_dongle_mac_addr", "sensor_mac_addr"],
    "data_key_list"   : ["temperature", "relative_humidity", "absolute_humidity"],
    "input_file_list" : ["${inkbird_env_sensor_v2_daily_path}/all_json/${yyyymmdd}.json.gz"],
    "output_file"     : "${inkbird_env_sensor_v2_daily_path}/all_csv/${yyyymmdd}.csv.gz"
  },
  "job_inkbird_env_sensor_v2_daily_percentile_json": {
    "item"            : "inkbird_env_sensor_v2",
    "sensor"          : "inkbird_env_sensor_v2",
    "program"         : "to_percentile_json_list",
    "division_number" : 100,
    "run_key_list"    : ["dt_jst9", "http_dongle_mac_addr", "sensor_mac_addr"],
    "data_key_list"   : ["temperature", "relative_humidity", "absolute_humidity"],
    "input_file_list" : ["${inkbird_env_sensor_v2_daily_path}/all_json/${yyyymmdd}.json.gz"],
    "output_file"     : "${inkbird_env_sensor_v2_daily_path}/percentile_json/${yyyymmdd}.json.gz"
  },
  "job_inkbird_env_sensor_v2_daily_percentile_csv": {
    "item"            : "inkbird_env_sensor_v2",
    "sensor"          : "inkbird_env_sensor_v2",
    "program"         : "to_csv",
    "division_number" : 100,
    "run_key_list"    : ["dt_jst9", "http_dongle_mac_addr", "sensor_mac_addr"],
    "data_key_list"   : ["temperature", "relative_humidity", "absolute_humidity"],
    "input_file_list" : ["${inkbird_env_sensor_v2_daily_path}/percentile_json/${yyyymmdd}.json.gz"],
    "output_file"     : "${inkbird_env_sensor_v2_daily_path}/percentile_csv/${yyyymmdd}.csv.gz"
  },
  "job_inkbird_env_sensor_v2_daily_sample_csv_60": {
    "item"            : "inkbird_env_sensor_v2",
    "sensor"          : "inkbird_env_sensor_v2",
    "program"         : "to_sample_csv",
    "run_key_list"    : ["dt_jst9", "http_dongle_mac_addr", "sensor_mac_addr"],
    "data_key_list"   : ["temperature", "relative_humidity", "absolute_humidity"],
    "sample_time_key" : "dt_jst9",
    "sample_begin"    : "${yyyymmdd}000000",
    "sample_end"      : "${yyyymmdd+1}000000",
    "sample_interval" : 60,
    "input_file_list" : ["${inkbird_env_sensor_v2_daily_path}/all_json/${yyyymmdd}.json.gz"],
    "output_file"     : "${inkbird_env_sensor_v2_daily_path}/sample_csv_${sample_interval}/${yyyymmdd}.csv.gz"
  },
  "job_inkbird_env_sensor_v2_daily_sample_csv_600": {
    "item"            : "inkbird_env_sensor_v2",
    "sensor"          : "inkbird_env_sensor_v2",
    "program"         : "to_sample_csv",
    "run_key_list"    : ["dt_jst9", "http_dongle_mac_addr", "sensor_mac_addr"],
    "data_key_list"   : ["temperature", "relative_humidity", "absolute_humidity"],
    "sample_time_key" : "dt_jst9",
    "sample_begin"    : "${yyyymmdd}000000",
    "sample_end"      : "${yyyymmdd+1}000000",
    "sample_interval" : 600,
    "input_file_list" : ["${inkbird_env_sensor_v2_daily_path}/all_json/${yyyymmdd}.json.gz"],
    "output_file"     : "${inkbird_env_sensor_v2_daily_path}/sample_csv_${sample_interval}/${yyyymmdd}.csv.gz"
  },
  "job_inkbird_env_sensor_v2_daily_sample_csv_3600": {
    "item"            : "inkbird_env_sensor_v2",
    "sensor"          : "inkbird_env_sensor_v2",
    "program"         : "to_sample_csv",
    "run_key_list"    : ["dt_jst9", "http_dongle_mac_addr", "sensor_mac_addr"],
    "data_key_list"   : ["temperature", "relative_humidity", "absolute_humidity"],
    "sample_time_key" : "dt_jst9",
    "sample_begin"    : "${yyyymmdd}000000",
    "sample_end"      : "${yyyymmdd+1}000000",
    "sample_interval" : 3600,
    "input_file_list" : ["${inkbird_env_sensor_v2_daily_path}/all_json/${yyyymmdd}.json.gz"],
    "output_file"     : "${inkbird_env_sensor_v2_daily_path}/sample_csv_${sample_interval}/${yyyymmdd}.csv.gz"
  }
}
